
<h2>All Stocks   
  <span class="spanlink" [routerLink]="['/add']" *ngIf="roles=='admin'">Add Stock</span>
  <a class="logoutlink" (click)="logout()">logout</a>
  <span class="userinfo">{{email}}</span>
</h2>

<div *ngIf="validated">
  <form [formGroup]="form" (ngSubmit)="processform()">
    <label for=""></label>
    <input type="text" formControlName="searchstring" />
    <button type="submit">Search</button>
  </form>
  
  <br>
  
  
  <table style="font-size: 12px;">
    <thead>
      <tr style="background-color: rgb(78, 114, 214);">
        <th style="min-width: 90px; width: 150px;">Stock / Code</th>
        <th style="min-width: 55px; width: 70px;">Price</th>
        <th style="width: 250px;">Action</th>
      </tr>
    </thead>
    <tbody>
      <tr *ngFor="let x of stocks">
        <td> <a style=" cursor: pointer;" (click)="navstockdetailpage(x.market + ':' + x.ticker)">
          <span style="color: rgb(34, 74, 255); font-weight: bold;">{{x.stockName}}</span>
           <br>
           <span>{{x.market}}:{{x.ticker}}</span>

        </a></td>
        <td>{{x.lastprice.toFixed(3)}}</td>
        <td>
          <div style=" margin: 5px 15px 5px 0px;  display: inline-block; font-size: 10px;">
            <mat-slide-toggle [checked]="x.watchlistid>0" [color]="'primary'" (change)="togglewatchlist(x.id,x.watchlistid , $event.checked)">Watchlist</mat-slide-toggle>
          </div>
          
          <div style="padding-bottom: 5px; display: inline-block;">
            <mat-slide-toggle [checked]="x.portfolioid>0" [color]="'accent'" (change)="toggleportfolio(x.id,x.portfolioid , $event.checked)">Portfolio</mat-slide-toggle>
          </div>
          
        </td>
      </tr>
    </tbody>
  </table>

</div>

<div *ngIf="!validated">
  <p>Loading Page...</p>
  <mat-progress-bar mode="query" style="width: 200px"></mat-progress-bar>
</div>

